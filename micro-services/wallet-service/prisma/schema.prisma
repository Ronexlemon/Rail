datasource db {
    provider = "postgres"
    url      = env("DATABASE_URL")
}

generator db {
    provider = "go run github.com/steebchen/prisma-client-go"
}

model Wallet {
    id         String          @id @default(uuid())
    businessId String          // from Business Service
    customerId String?         // from Business Customer Service (if end-user)
    type       WalletType
    createdAt  DateTime        @default(now())
    updatedAt  DateTime        @updatedAt
    addresses  WalletAddress[] // One-to-many relationship

    @@index([businessId])
    @@index([customerId])
}

model WalletAddress {
    id        String  @id @default(uuid())
    walletId  String
    network   Network
    address   String  @unique
    privateKey String
    createdAt DateTime @default(now())
    wallet   Wallet @relation(fields: [walletId], references: [id], onDelete: Cascade)

    @@index([walletId])
}

enum WalletType {
    BUSINESS
    CUSTOMER
}

enum Network {
    EVM
    SOLANA
    TRON
}
